.\" Automatically generated by Pandoc 2.0.6
.\"
.TH "s1kd\-validate" "1" "2024\-12\-27" "" "s1kd\-tools"
.hy
.SH NAME
.PP
s1kd\-validate \- Validate S1000D CSDB objects against their schemas
.SH SYNOPSIS
.IP
.nf
\f[C]
s1kd\-validate\ [\-s\ <path>]\ [\-X\ <URI>]\ [\-F|\-f]\ [\-o|\-x]\ [\-elqTv8^h?]
\ \ \ \ \ \ \ \ \ \ \ \ \ \ [<object>...]
\f[]
.fi
.SH DESCRIPTION
.PP
The \f[I]s1kd\-validate\f[] tool validates S1000D CSDB objects, checking
whether they are valid XML files and if they are valid against their own
S1000D schemas.
.SH OPTIONS
.TP
.B \-e, \-\-ignore\-empty
Ignore validation for empty or non\-XML documents.
.RS
.RE
.TP
.B \-F, \-\-valid\-filenames
List valid files.
.RS
.RE
.TP
.B \-f, \-\-filenames
List invalid files.
.RS
.RE
.TP
.B \-h, \-?, \-\-help
Show help/usage message.
.RS
.RE
.TP
.B \-l, \-\-list
Treat input as a list of object names to validate, rather than an object
itself.
.RS
.RE
.TP
.B \-o, \-\-output\-valid
Output valid CSDB objects to stdout.
.RS
.RE
.TP
.B \-q, \-\-quiet
Quiet mode.
The tool will not output anything to stdout or stderr.
Success/failure will only be indicated through the exit status.
.RS
.RE
.TP
.B \-s, \-\-schema <path>
Validate the objects against the specified schema, rather than the one
that they reference.
.RS
.RE
.TP
.B \-T, \-\-summary
Print a summary of the validation after it completes, including
statistics on the number of documents that passed/failed.
.RS
.RE
.TP
.B \-v, \-\-verbose
Verbose mode.
Success/failure will be explicitly reported on top of any errors.
.RS
.RE
.TP
.B \-X, \-\-exclude <URI>
Exclude an XML namespace from the validation.
Elements in the namespace specified by <URI> are ignored.
.RS
.RE
.TP
.B \-x, \-\-xml
Output an XML report.
.RS
.RE
.TP
.B \-8, \-\-deep\-copy\-nodes
Include a deep copy of invalid nodes on the XML report (\-x).
By default, only a shallow copy of the node is included (the node and
its attributes but no children).
.RS
.RE
.TP
.B \-^, \-\-remove\-deleted
Validate with elements that have a change type of "delete" removed.
.RS
.RE
.TP
.B \-\-version
Show version information.
.RS
.RE
.TP
.B <object>...
Any number of CSDB objects to validate.
If none are specified, input is read from stdin.
.RS
.RE
.PP
In addition, the following options allow configuration of the XML
parser:
.TP
.B \-\-dtdload
Load the external DTD.
.RS
.RE
.TP
.B \-\-huge
Remove any internal arbitrary parser limits.
.RS
.RE
.TP
.B \-\-net
Allow network access to load external DTD and entities.
.RS
.RE
.TP
.B \-\-noent
Resolve entities.
.RS
.RE
.TP
.B \-\-parser\-errors
Emit errors from parser.
.RS
.RE
.TP
.B \-\-parser\-warnings
Emit warnings from parser.
.RS
.RE
.TP
.B \-\-xinclude
Do XInclude processing.
.RS
.RE
.TP
.B \-\-xml\-catalog <file>
Use an XML catalog when resolving entities.
Multiple catalogs may be loaded by specifying this option multiple
times.
.RS
.RE
.SS XML catalogs
.PP
XML catalogs allow redirecting the canonical URIs of XML schemas and
other external resources to local files, so as to avoid the unnecessary
overhead of downloading those static resources over the Internet.
.PP
Below is an example of a catalog file which maps the S1000D schemas to a
local directory:
.IP
.nf
\f[C]
<catalog\ xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog">
<rewriteURI
uriStartString="http://www.s1000d.org"
rewritePrefix="/usr/share/s1kd/schemas"/>
</catalog>
\f[]
.fi
.PP
This can be placed in a catalog file automatically loaded by libxml2
(e.g., \f[C]/etc/xml/catalog\f[]) or saved to a file which is then
specified in an environment variable used by libxml2 (e.g.,
\f[C]XML_CATALOG_FILES\f[]):
.IP
.nf
\f[C]
$\ XML_CATALOG_FILES=catalog.xml\ s1kd\-validate\ <DMs...>
\f[]
.fi
.PP
Alternatively, the \-\-xml\-catalog option may be used:
.IP
.nf
\f[C]
$\ s1kd\-validate\ \-\-xml\-catalog=catalog.xml\ <DMs>...
\f[]
.fi
.SH EXIT STATUS
.TP
.B 0
No errors.
.RS
.RE
.TP
.B 1
Some CSDB objects are not well\-formed or valid.
.RS
.RE
.TP
.B 2
The number of schemas cached exceeded the available memory.
.RS
.RE
.TP
.B 3
A specified schema could not be read.
.RS
.RE
.SH EXAMPLE
.IP
.nf
\f[C]
$\ s1kd\-validate\ DMC\-EX\-A\-00\-00\-00\-00A\-040A\-D_000\-01_EN\-CA.XML
\f[]
.fi
.SH AUTHORS
khzae.net.
