.\" Automatically generated by Pandoc 2.3.1
.\"
.TH "s1kd\-defaults" "1" "2021\-04\-16" "" "s1kd\-tools"
.hy
.SH NAME
.PP
s1kd\-defaults \- \f[C]\&.defaults\f[], \f[C]\&.dmtypes\f[] and
\f[C]\&.fmtypes\f[] files management tool
.SH SYNOPSIS
.IP
.nf
\f[C]
s1kd\-defaults\ [\-DdFfisth?]\ [\-b\ <BREX>]\ [\-j\ <map>]
\ \ \ \ \ \ \ \ \ \ \ \ \ \ [\-n\ <name>\ \-v\ <value>\ ...]\ [\-o\ <dir>]\ [<file>...]
\f[]
.fi
.SH DESCRIPTION
.PP
The \f[I]s1kd\-defaults\f[] tool generates a basic \f[C]\&.defaults\f[]
file for a new CSDB, which is used by several of the other s1kd\-tools
to determine default values for S1000D metadata.
It also provides a way to convert between the simple text and XML
formats of the \f[C]\&.defaults\f[], \f[C]\&.dmtypes\f[] and
\f[C]\&.fmtypes\f[] files.
.SH OPTIONS
.TP
.B \-b, \-\-brex <BREX>
Use the specified BREX data module to build the \f[C]\&.defaults\f[] and
\f[C]\&.dmtypes\f[] files.
This can be used both when initializing a new CSDB (\-i) or either file
can be generated from a BREX data module separately.
.RS
.RE
.TP
.B \-D, \-\-dmtypes
Convert a \f[C]\&.dmtypes\f[] file.
.RS
.RE
.TP
.B \-d, \-\-defaults
Convert a \f[C]\&.defaults\f[] file.
.RS
.RE
.TP
.B \-F, \-\-fmtypes
Convert a \f[C]\&.fmtypes\f[] file.
.RS
.RE
.TP
.B \-f, \-\-overwrite
Overwrite the existing file after conversion.
.RS
.RE
.TP
.B \-h, \-?, \-\-help
Show help/usage message.
.RS
.RE
.TP
.B \-i, \-\-init
Initialize a new CSDB by generating the \f[C]\&.defaults\f[],
\f[C]\&.dmtypes\f[] and \f[C]\&.fmtypes\f[] files in the current
directory.
.RS
.RE
.TP
.B \-J, \-\-dump\-brexmap
Dump the default \f[C]\&.brexmap\f[] file to stdout.
.RS
.RE
.TP
.B \-j, \-\-brexmap <map>
Use a custom \f[C]\&.brexmap\f[] file to map a BREX DM to a
\f[C]\&.defaults\f[] or \f[C]\&.dmtypes\f[] file.
.RS
.RE
.TP
.B \-n, \-\-name <name>
The name of a specific default key to set a value for.
The value must be specified after this option with \-v.
Multiple pairs of \-n and \-v can be specified to set multiple default
values.
.RS
.RE
.TP
.B \-o, \-\-dir <dir>
Initialize or manage configuration files in <dir> instead of the current
directory.
If <dir> does not exist, it will be created.
.RS
.RE
.TP
.B \-s, \-\-sort
Sort the entries alphabetically for either file/output format.
.RS
.RE
.TP
.B \-t, \-\-text
Output using the simple text format.
Otherwise, the XML format is used by default.
.RS
.RE
.TP
.B \-v, \-\-value <value>
The new value to set for the default key specified with \-n.
This option must be specified after \-n.
.RS
.RE
.TP
.B \-\-version
Show version information.
.RS
.RE
.TP
.B <file>...
Names of files to convert.
If none are specified, the default names of \f[C]\&.defaults\f[] (for
the \-d option), \f[C]\&.dmtypes\f[] (for the \-D option) or
\f[C]\&.fmtypes\f[] (for the \-F option) in the current directory are
used.
.RS
.RE
.PP
In addition, the following options allow configuration of the XML
parser:
.TP
.B \-\-dtdload
Load the external DTD.
.RS
.RE
.TP
.B \-\-huge
Remove any internal arbitrary parser limits.
.RS
.RE
.TP
.B \-\-net
Allow network access to load external DTD and entities.
.RS
.RE
.TP
.B \-\-noent
Resolve entities.
.RS
.RE
.TP
.B \-\-parser\-errors
Emit errors from parser.
.RS
.RE
.TP
.B \-\-parser\-warnings
Emit warnings from parser.
.RS
.RE
.TP
.B \-\-xinclude
Do XInclude processing.
.RS
.RE
.TP
.B \-\-xml\-catalog <file>
Use an XML catalog when resolving entities.
Multiple catalogs may be loaded by specifying this option multiple
times.
.RS
.RE
.SS \f[C]\&.brexmap\f[] file
.PP
This file specifies a mapping between BREX structure object rules and
\f[C]\&.defaults\f[] and \f[C]\&.dmtypes\f[] files.
The path to an object can be written in many different ways in a BREX
rule, so the \f[C]\&.brexmap\f[] file allows any project\[aq]s BREX to
be used to generate these files without having to modify the BREX data
module itself.
.PP
By default, the program will search for a file named \f[C]\&.brexmap\f[]
in the current directory and parent directories, but any file can be
specified using the \-j option.
If there is no \f[C]\&.brexmap\f[] file and the \-j option is not
specified, a default mapping will be used.
.PP
Example of \f[C]\&.brexmap\f[] file:
.IP
.nf
\f[C]
<brexMap>
<dmtypes\ path="//\@infoCode"/>
<default\ path="//\@languageIsoCode"\ ident="languageIsoCode"/>
<default\ path="//\@countryIsoCode"\ ident="countryIsoCode"/>
</brexMap>
\f[]
.fi
.PP
More exact matches can be made by using the attribute \f[C]id\f[] on the
\f[C]<dmtypes>\f[] or \f[C]<default>\f[] elements.
This overrides the \f[C]path\f[] attribute, and will only match a BREX
rule with the specified ID.
.SH EXAMPLES
.SS Initialize a new CSDB, using the XML format
.IP
.nf
\f[C]
$\ mkdir\ mycsdb
$\ cd\ mycsdb
$\ s1kd\-defaults\ \-i
\f[]
.fi
.SS Initialize a new CSDB, using the simple text format
.IP
.nf
\f[C]
$\ mkdir\ mycsdb
$\ cd\ mycsdb
$\ s1kd\-defaults\ \-ti
\f[]
.fi
.SS Generate a custom\-named \f[C]\&.defaults\f[] file
.IP
.nf
\f[C]
$\ s1kd\-defaults\ >\ custom\-defaults.xml
\f[]
.fi
.SS Convert a simple text formatted file to XML
.IP
.nf
\f[C]
$\ s1kd\-defaults\ \-df
\f[]
.fi
.SS Sort entries and output in text format
.IP
.nf
\f[C]
$\ s1kd\-defaults\ \-dts\ custom\-defaults.txt
\f[]
.fi
.SS Set a default value in the current \f[C]\&.defaults\f[] file
.IP
.nf
\f[C]
$\ s1kd\-defaults\ \-df\ \-n\ issue\ \-v\ 5.0
\f[]
.fi
.SH AUTHORS
khzae.net.
